README for the HIRi Tardis filter
=================================


Introduction
----------------

The HIRi Tardis filter is aimed to be integrated in the myTardis platform (http://mytardis.github.io/), a data management system for private lab/facility data.

HIRi Tardis project aims to provide a storage platform for the Health Innovations Research Institute (http://www.rmit.edu.au/research/institutes/healthinnovations) laboratory, located in RMIT University, Bundoora campus.

Technically, it enables extracting metadata from files in the PDA files format, created by SoftMax Pro, program running the Flexstation III micro-wells plates reader, on which HIRi scientists run experiments.

Additional information can be found in the [wiki](https://github.com/guillaumeprevost/hiri-tardis-filter/wiki).

Installation
---------------

1. A myTardis instance has to be set up and configured.
2. Copy the filter *flexstation.py* into the *filter* folder of the myTardis instance (typically *project-name/tardis/tardis-portal/filters*)
3. Register the filter to the myTardis instance by adding the following code in your the *settings.py* file:
```python
	POST_SAVE_FILTERS = [
		("tardis.tardis_portal.filters.flexstation.make_filter",
		["FLEXSTATION", "http://rmit.edu.au/flexstation"]),  Flexstation III filter
	]
```

4. Make sure the middleware classes for filters initialisation is enabled by adding this line into the *settings.py* file:
```python
	MIDDLEWARE_CLASSES += ('tardis.tardis_portal.filters.FilterInitMiddleware',)
```

5. Restart your myTardis instance (stop and start myTardis)

6. Metadata should be automatically extracted when uploading a PDA file.

Metadata extraction
--------------------------

The PDA format being generated by the proprietary program SoftMax Pro (http://www.moleculardevices.com/Products/Software/SoftMax-Pro.html), the PDA files had to be reverse-engineered to extract the informations. The PDA format can be interpreted using an hexadecimal editor. It is composed of several sections, containing data and/or metadata.

The filter potentially works for files created with any version of SoftMax Pro.

Details about the structure of the PDA format are available on a [dedicated wiki page](https://github.com/guillaumeprevost/hiri-tardis-filter/wiki/PDA-Files-reverse-engineering)

Known issues
-------------------

- Even though most of the PDA files can be read, some of them have extra or unexpected section(s) that could make the extraction fail. Even though the filter was designed to be as generic as possible, it may fail to extract any metadata following such section.

- The following metadata are required, but so far could not be found or extracted:
	- Read time: Date and time when the plate read was done
	- Section kind: Plate or Cuvette
	- Read Type: Endpoint, Kinetic, Spectrum, Well Scan or Flex
	- Data mode: for absorbance plates: Absorbance or % Transmittance. For others: Fluorescence, Luminescence, or Time Resolved Fluorescence
	- Data Type: Raw or Reduced
	- Reads per Well: number of times a well is read for a single reading
	- PMT Settings: Automatic, High, Medium, or Low

- Only very basic unit testing has been performed on this filter so far
